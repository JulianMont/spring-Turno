<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Formulario Horario Laboral</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
</head>
<body class="bg-light d-flex flex-column min-vh-100">
	<!-- Navbar -->
		<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
			<div class="container-fluid">
				<a class="navbar-brand text-white fw-semibold" th:href="@{/home/index}"
					onmouseover="this.style.color='#ffc107'" onmouseout="this.style.color='white'">
					Sistema de Turnos
				</a>

				<div class="d-flex align-items-center ms-auto gap-3">
					<div class="dropdown">
						<button class="btn btn-primary dropdown-toggle d-flex align-items-center gap-2 fw-semibold"
							type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false"
							onmouseover="this.style.color='#ffc107'" onmouseout="this.style.color='white'">
							<i class="bi bi-person-circle fs-4"></i>
							<span sec:authentication="name"></span>
						</button>
						<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
							<li class="px-3 py-2">
								<form th:action="@{/auth/logout}" method="post" class="m-0 p-0">
									<button type="submit" class="btn btn-danger btn-sm rounded w-100">
										Cerrar sesión
									</button>
								</form>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</nav>

    <main class="container my-4 flex-grow-1">
        <h2 class="mb-4 text-center" 
            th:text="${horarioLaboral.idHorarioLaboral == null ? 'Crear Nuevo Horario Laboral' : 'Editar Horario Laboral'}">
            Formulario Horario Laboral
        </h2>

        <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

        <form th:object="${horarioLaboral}"
              th:action="@{${horarioLaboral.idHorarioLaboral == null} ? 
                          '/empleados/' + ${idEmpleado} + '/horarios/save' : 
                          '/empleados/' + ${idEmpleado} + '/horarios/' + ${horarioLaboral.idHorarioLaboral} + '/actualizar'}"
              method="post" class="row g-3 needs-validation" novalidate>

            <input type="hidden" th:field="*{idHorarioLaboral}" />

            <div class="col-md-6">
                <label for="diaSemana" class="form-label">Día de la Semana:</label>
                <select id="diaSemana" name="diaSemana" th:field="*{diaSemana}" class="form-select" required>
                    <option value="" disabled th:selected="${horarioLaboral.diaSemana == null}">Seleccione un día</option>
                    <option value="LUNES" th:selected="${horarioLaboral.diaSemana == 'LUNES'}">Lunes</option>
                    <option value="MARTES" th:selected="${horarioLaboral.diaSemana == 'MARTES'}">Martes</option>
                    <option value="MIERCOLES" th:selected="${horarioLaboral.diaSemana == 'MIERCOLES'}">Miércoles</option>
                    <option value="JUEVES" th:selected="${horarioLaboral.diaSemana == 'JUEVES'}">Jueves</option>
                    <option value="VIERNES" th:selected="${horarioLaboral.diaSemana == 'VIERNES'}">Viernes</option>
                    <option value="SABADO" th:selected="${horarioLaboral.diaSemana == 'SABADO'}">Sábado</option>
                    <option value="DOMINGO" th:selected="${horarioLaboral.diaSemana == 'DOMINGO'}">Domingo</option>
                </select>
                <div th:if="${#fields.hasErrors('diaSemana')}" th:errors="*{diaSemana}" class="invalid-feedback d-block"></div>
            </div>

			<div class="col-md-3">
			    <label for="horaInicio" class="form-label">Hora de Inicio:</label>
			    <input type="time" id="horaInicio" name="horaInicio" th:field="*{horaInicio}" class="form-control" required step="1800" />
			    <div th:if="${#fields.hasErrors('horaInicio')}" th:errors="*{horaInicio}" class="invalid-feedback d-block"></div>
			</div>

			<div class="col-md-3">
			    <label for="horaFin" class="form-label">Hora de Fin:</label>
			    <input type="time" id="horaFin" name="horaFin" th:field="*{horaFin}" class="form-control" required step="1800" />
			    <div th:if="${#fields.hasErrors('horaFin')}" th:errors="*{horaFin}" class="invalid-feedback d-block"></div>
			</div>


            <div class="col-12 d-flex justify-content-center gap-3 mt-4">
                <button type="submit" class="btn btn-success">
                    <i class="bi bi-save me-1"></i> Guardar
                </button>
                <a class="btn btn-secondary" th:href="@{'/empleados/' + ${idEmpleado}}">
                    <i class="bi bi-x-circle me-1"></i> Cancelar
                </a>
            </div>
        </form>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
