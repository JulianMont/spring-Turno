<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Formulario de Ausencia</title>
    <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>

	<h2 th:text="${ausenciaRequestDTO.idAusenciaEmpleado == null ? 'Agregar Ausencia' : 'Editar Ausencia'}"></h2>

	
	<div th:if="${errorMessage}" style="color: red; margin-bottom: 10px;">
	    <p th:text="${errorMessage}"></p>
	</div>
	
	<p style="color: red;" th:text="'DEBUG FECHA DTO: ' + ${ausenciaRequestDTO.fecha}"></p>
	
	<form th:object="${ausenciaRequestDTO}" 
	      th:action="${ausenciaRequestDTO.idAusenciaEmpleado == null} ?
	                   @{/empleados/{idEmpleado}/ausencias/save(idEmpleado=${idEmpleado})} :
	                   @{/empleados/{idEmpleado}/ausencias/{idAusencia}/actualizar(idEmpleado=${idEmpleado}, idAusencia=${ausenciaRequestDTO.idAusenciaEmpleado})}" 
	      method="post">
		   <!-- th:attr="min=${fechaMin} Esto va luego de th:field=fecha -->
		   <div>
		     <label for="fecha">Fecha:</label>
		     <input type="date" id="fecha" name="fecha"
		            th:value="${#temporals.format(ausenciaRequestDTO.fecha, 'yyyy-MM-dd')}"
		            required />
		     <div th:if="${#fields.hasErrors('fecha')}" th:errors="*{fecha}"></div>
		   </div>
	    <div>
	        <label for="motivo">Motivo:</label>
	        <input type="text" id="motivo" th:field="*{motivo}" placeholder="Motivo de la ausencia" required maxlength="255"/>
	        <div th:if="${#fields.hasErrors('motivo')}" th:errors="*{motivo}"></div>
	    </div>

	    <div>
	        <button type="submit" >Guardar</button>
	        <a th:href="@{/empleados/{idEmpleado}(idEmpleado=${idEmpleado})}">Cancelar</a>
	    </div>
	</form>


</body>
</html>
