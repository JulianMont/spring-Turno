<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8" />
	<title>Inicio</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body class="d-flex flex-column min-vh-100 bg-light">

	<!-- Navbar -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
		<div class="container-fluid">
			<a class="navbar-brand text-white fw-semibold" th:href="@{/home/index}"
				onmouseover="this.style.color='#ffc107'" onmouseout="this.style.color='white'">
				Sistema de Turnos
			</a>

			<div class="d-flex align-items-center ms-auto gap-3">
				<div class="dropdown">
					<button class="btn btn-primary dropdown-toggle d-flex align-items-center gap-2 fw-semibold"
						type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false"
						onmouseover="this.style.color='#ffc107'" onmouseout="this.style.color='white'">
						<i class="bi bi-person-circle fs-4"></i>
						<span sec:authentication="name"></span>
					</button>

					<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
						<li class="px-3 py-2">
							<form th:action="@{/auth/logout}" method="post" class="m-0 p-0">
								<button type="submit" class="btn btn-danger btn-sm rounded w-100">
									Cerrar sesión
								</button>
							</form>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</nav>

	<!-- Contenido principal -->
	<main class="container d-flex flex-column justify-content-center align-items-center flex-grow-1 text-center">

		<h2 class="mb-4">Bienvenido/a, <span sec:authentication="name"></span></h2>

		<div class="d-flex justify-content-center flex-wrap gap-3 align-items-stretch" style="max-width: 900px;">

			<!-- Solo ADMIN -->
			<div sec:authorize="hasRole('ADMIN')" class="d-flex flex-wrap gap-3 align-items-stretch">
				<a class="btn btn-primary d-flex align-items-center justify-content-center h-100 px-4"
					th:href="@{/empleados/list}">Empleados</a>
				<a class="btn btn-primary d-flex align-items-center justify-content-center h-100 px-4"
					th:href="@{/cliente/list}">Clientes</a>

				<div class="btn-group h-100">
					<button class="btn btn-primary dropdown-toggle h-100 d-flex align-items-center"
						data-bs-toggle="dropdown">Ubicaciones</button>
					<ul class="dropdown-menu">
						<li><a class="dropdown-item" th:href="@{/ubicaciones/list}">Ver Ubicaciones</a></li>
						<li><a class="dropdown-item" th:href="@{/ubicaciones/form}">Nueva Ubicación</a></li>
					</ul>
				</div>
			</div>

			<!-- ADMIN y USER -->
			<a class="btn btn-primary d-flex align-items-center justify-content-center h-100 px-4"
				th:href="@{/especialidades/list}" sec:authorize="hasAnyRole('ADMIN', 'USER')">Especialidades</a>

			<div class="btn-group h-100" sec:authorize="hasAnyRole('ADMIN', 'USER')">
				<button class="btn btn-primary dropdown-toggle h-100 d-flex align-items-center"
					data-bs-toggle="dropdown">Servicios</button>
				<ul class="dropdown-menu">
					<li><a class="dropdown-item" th:href="@{/servicios/list}">Ver Servicios</a></li>
				</ul>
			</div>

			<div class="btn-group h-100" sec:authorize="hasAnyRole('ADMIN', 'USER')">
				<button class="btn btn-primary dropdown-toggle h-100 d-flex align-items-center"
					data-bs-toggle="dropdown">Turnos</button>
				<ul class="dropdown-menu">
					<li><a class="dropdown-item" th:href="@{/turnos/list}">Ver Turnos</a></li>
					<li><a class="dropdown-item" th:href="@{/turnos/GenerarTurno}">Generar Turno</a></li>
				</ul>
			</div>
		</div>
	</main>
</body>

</html>