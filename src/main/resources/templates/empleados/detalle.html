<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Detalle Empleado</title>
    <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
	
<a th:href="@{/empleados/list}">Ver empleados</a>

<h1>Detalle del Empleado</h1>

<section>
    <h2>Información Básica</h2>
    <p><strong>Nombre:</strong> <span th:text="${empleado.nombre}"></span></p>
    <p><strong>Apellido:</strong> <span th:text="${empleado.apellido}"></span></p>
    <p><strong>Legajo:</strong> <span th:text="${empleado.legajo}"></span></p>
    <p><strong>DNI:</strong> <span th:text="${empleado.dni}"></span></p>
    <p><strong>Especialidad:</strong> <span th:text="${empleado.especialidad.nombre}"></span></p>
</section>

<hr/>

<section>
    <h2>Horarios Laborales</h2>
    <table border="1">
        <thead>
            <tr>
                <th>Día</th>
                <th>Hora Inicio</th>
                <th>Hora Fin</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="horario : ${empleado.horariosLaborales}">
                <td th:text="${horario.dia}"></td>
                <td th:text="${horario.horaInicio}"></td>
                <td th:text="${horario.horaFin}"></td>
                <td>
                    <a th:href="@{/empleados/{idEmpleado}/horarios/{idHorario}/editar(idEmpleado=${empleado.idPersona}, idHorario=${horario.idHorarioLaboral})}">Editar</a>
                    |
                    <form th:action="@{/empleados/{idEmpleado}/horarios/{idHorario}/eliminar(idEmpleado=${empleado.idPersona}, idHorario=${horario.idHorarioLaboral})}" method="post" style="display:inline;">
                        <button type="submit" onclick="return confirm('¿Seguro que desea eliminar este horario?');">Eliminar</button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
    <a th:href="@{/empleados/{id}/horarios/form(id=${empleado.idPersona})}">Agregar Horario</a>
</section>

<section>
    <h2>Días Ausentes</h2>
    <table border="1">
        <thead>
            <tr>
                <th>Fecha</th>
                <th>Motivo</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="ausencia : ${empleado.diasAusentes}">
                <td th:text="${ausencia.fecha}"></td>
                <td th:text="${ausencia.motivo}"></td>
                <td>
                    <a th:href="@{/empleados/{idEmpleado}/ausencias/{idAusencia}/editar(idEmpleado=${empleado.idPersona}, idAusencia=${ausencia.idAusenciaEmpleado})}">Editar</a>
                    |
                    <form th:action="@{/empleados/{idEmpleado}/ausencias/{idAusencia}/eliminar(idEmpleado=${empleado.idPersona}, idAusencia=${ausencia.idAusenciaEmpleado})}" method="post" style="display:inline;">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <button type="submit" onclick="return confirm('¿Seguro que desea eliminar esta ausencia?');">Eliminar</button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
    <a th:href="@{/empleados/{id}/ausencias/form(id=${empleado.idPersona})}">Agregar Ausencia</a>
</section>

</body>
</html>
